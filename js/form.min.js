const feedbackLink=document.querySelector(".feedback-button"),mapLink=document.querySelector(".map-open"),feedbackModal=document.querySelector(".modal-feedback"),mapModal=document.querySelector(".modal-map"),cartModal=document.querySelector(".modal-cart"),feedbackModalClose=feedbackModal.querySelector(".modal-feedback .modal-close"),mapModalClose=mapModal.querySelector(".modal-map .modal-close"),cartModalClose=cartModal.querySelector(".modal-cart .modal-close"),feedbackForm=feedbackModal.querySelector(".feedback-form"),feedbackInputName=feedbackModal.querySelector(".feedback-name"),feedbackInputEmail=feedbackModal.querySelector(".feedback-email"),feedbackInputMessage=feedbackModal.querySelector(".feedback-message"),ESC_KEY=27;let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name")||"",storageEmail=localStorage.getItem("email")||""}catch(e){isStorageSupport=!1}feedbackLink.addEventListener("click",function(e){e.preventDefault(),feedbackModal.classList.add("opened"),storageName||storageEmail?(feedbackInputName.value=storageName,feedbackInputEmail.value=storageEmail,feedbackInputMessage.focus()):feedbackInputName.focus()}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("opened")}),feedbackModalClose.addEventListener("click",function(e){e.preventDefault(),feedbackModal.classList.remove("opened"),feedbackModal.classList.remove("modal-error")}),mapModalClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("opened")}),cartModalClose.addEventListener("click",function(e){e.preventDefault(),cartModal.classList.remove("opened")}),feedbackForm.addEventListener("submit",function(e){feedbackInputName.value&&feedbackInputEmail.value&&feedbackInputMessage.value?isStorageSupport&&(localStorage.setItem("name",feedbackInputName.value),localStorage.setItem("email",feedbackInputEmail.value)):(e.preventDefault(),feedbackModal.classList.remove("modal-error"),feedbackModal.offsetWidth=feedbackModal.offsetWidth,feedbackModal.classList.add("modal-error"))}),window.addEventListener("click",function(e){if(e.target.classList.contains("emerging-buy")&&(e.preventDefault(),cartModal.classList.add("opened")),e.target.classList.contains("service-button")&&toggleSlide(e.target),e.target.classList.contains("catalog-button")&&toggleSlideCategories(e.target),e.target.classList.contains("gallery-button")||e.target.closest("button.gallery-button")){const t=e.target.classList.contains("gallery-button")?e.target:e.target.closest("button.gallery-button");toggleNextSliderButton(t)}}),window.addEventListener("keydown",function(e){27===e.keyCode&&(feedbackModal.classList.contains("opened")&&(e.preventDefault(),feedbackModal.classList.remove("opened"),feedbackModal.classList.remove("modal-error")),mapModal.classList.contains("opened")&&(e.preventDefault(),mapModal.classList.remove("opened")),cartModal.classList.contains("opened")&&(e.preventDefault(),cartModal.classList.remove("opened")))});const toggleSlide=e=>{const t=document.querySelector(".description-slide.active"),a=document.querySelector(".service-button.current");t.classList.remove("active"),a.classList.remove("current"),e.classList.add("current");const o=e.dataset.slideIndex;document.querySelectorAll(".description-slide")[o].classList.add("active")},toggleSlideCategories=e=>{const t=document.querySelector(".slider-item.active"),a=document.querySelector(".catalog-button.current");t.classList.remove("active"),a.classList.remove("current"),e.classList.add("current");const o=e.dataset.slideCategories;document.querySelectorAll(".slider-item")[o].classList.add("active")},toggleNextSliderButton=e=>{const t=document.querySelectorAll(".slider-item"),a=document.querySelectorAll(".catalog-button");let o=0;if(t.forEach((e,t)=>o=e.classList.contains("active")?t:o),t[o].classList.remove("active"),a[o].classList.remove("current"),e.classList.contains("gallery-button-back")){const e=o-1<0?t.length-1:o-1;t[e].classList.add("active"),a[e].classList.add("current")}else{const e=o+1>t.length-1?0:o+1;t[e].classList.add("active"),a[e].classList.add("current")}};
